ğŸ§¾ è´¦æˆ·ç®¡ç†ç³»ç»Ÿæ–‡æ¡£ï¼ˆStanleyHi å¹³å°é€šç”¨ï¼‰
ğŸ“Œ é¡¹ç›®æ¦‚å†µ
æœ¬ç³»ç»Ÿæ˜¯ä¸º StanleyHi ç½‘ç«™å¹³å°æ„å»ºçš„ç»Ÿä¸€è´¦æˆ·ç³»ç»Ÿï¼Œé€‚ç”¨äºå¤šä¸ªåŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ new-ielts-speaking, feelink ç­‰ï¼‰ï¼Œæ”¯æŒï¼š

âœ… ç”¨æˆ·æ³¨å†Œ / ç™»å½• / ç™»å‡º

âœ… å¤šé¡¹ç›®æƒé™ç®¡ç†ï¼ˆproject-level membershipï¼‰

âœ… Zustand å…¨å±€çŠ¶æ€ç®¡ç†

âœ… æ— å†—ä½™é€»è¾‘ï¼Œæ¨¡å—åŒ–å¼ºï¼Œæ˜“å¤ç”¨

ğŸ§± æŠ€æœ¯ç»“æ„æ¦‚è§ˆ
æ¨¡å—	æŠ€æœ¯æ–¹æ¡ˆ
ç”¨æˆ·è®¤è¯	Supabase Authï¼ˆEmail + Passwordï¼‰
æƒé™ç®¡ç†	Supabase æ•°æ®åº“è¡¨ user_product_membership
çŠ¶æ€å…±äº«	Zustand â†’ useAuthStore
ç™»å½•ç›‘å¬	GlobalAuthListener.tsx
ç™»å‡ºç»Ÿä¸€å°è£…	logout() å·¥å…·å‡½æ•°
æƒé™åˆ¤æ–­	hasTier() æƒé™å‡½æ•°
é¡¹ç›®æ¥å…¥æ–¹å¼	é€šè¿‡ projectId å‚æ•°æ¥å…¥

ğŸ§© æ•°æ®åº“ç»“æ„
âœ… è¡¨ï¼šauth.usersï¼ˆç”± Supabase è‡ªåŠ¨åˆ›å»ºï¼‰
å­—æ®µ	è¯´æ˜
id	ç”¨æˆ·å”¯ä¸€ ID
email	é‚®ç®±
created_at	åˆ›å»ºæ—¶é—´

âœ… è¡¨ï¼šproducts
ç”¨äºç™»è®°å¹³å°ä¸­æ‰€æœ‰æ”¯æŒæƒé™ç®¡ç†çš„é¡¹ç›®ã€‚

å­—æ®µ	è¯´æ˜
id	é¡¹ç›®æ ‡è¯†ç¬¦ï¼ˆå¦‚ 'new-ielts-speaking'ï¼‰
name	å±•ç¤ºåç§°
created_at	æ—¶é—´æˆ³

âœ… è¡¨ï¼šuser_product_membership
è®°å½•æ¯ä¸ªç”¨æˆ·åœ¨æ¯ä¸ªé¡¹ç›®ä¸­çš„æƒé™ç­‰çº§ã€‚

å­—æ®µ	è¯´æ˜
user_id	ç”¨æˆ· IDï¼ˆå¤–é”®ï¼‰
product_id	é¡¹ç›® IDï¼ˆå¤–é”®ï¼Œå¯¹åº” products.idï¼‰
membership_tier	æƒé™ç­‰çº§ï¼ˆå¦‚ 'registered', 'pro', 'vip'ï¼‰
invite_code	å¯é€‰å­—æ®µ
joined_at	åŠ å…¥æ—¶é—´æˆ³

âš™ï¸ æ–‡ä»¶ç»“æ„æ ¸å¿ƒè¯´æ˜
âœ… useAuthStore.tsï¼ˆZustand çŠ¶æ€ï¼‰
ts
Copy
Edit
{
  user: User | null,
  membershipTier: 'guest' | 'registered' | 'pro' | 'vip' | 'admin'
}
âœ… GlobalAuthListener.tsx
æ¯ä¸ªé¡µé¢ layout ä¸­é€šè¿‡ï¼š

tsx
Copy
Edit
<GlobalAuthListener projectId="new-ielts-speaking" />
è‡ªåŠ¨è·å–ç”¨æˆ·ç™»å½•çŠ¶æ€ + å½“å‰é¡¹ç›®æƒé™ç­‰çº§ â†’ å†™å…¥ useAuthStore

âœ… logout.ts
ç»Ÿä¸€ç™»å‡ºæ–¹æ³•ï¼Œæ¸…ç©ºçŠ¶æ€ + é¡µé¢è·³è½¬

ts
Copy
Edit
await logout('/login')
âœ… hasTier() æƒé™åˆ¤æ–­å‡½æ•°
ts
Copy
Edit
hasTier('vip') // å½“å‰ç”¨æˆ·æ˜¯å¦ â‰¥ vip ç­‰çº§
ğŸš€ å¦‚ä½•æ¥å…¥æ–°é¡¹ç›®ï¼ˆä¾‹å¦‚ä½ è¦ä¸Šçº¿ freno é¡¹ç›®ï¼‰
åœ¨ products è¡¨æ’å…¥æ–°è¡Œï¼š

sql
Copy
Edit
INSERT INTO products (id, name, created_at)
VALUES ('freno', 'Frenotes', now());
åœ¨ layout.tsx ä¸­æ³¨å…¥ç›‘å¬å™¨ï¼š

tsx
Copy
Edit
<GlobalAuthListener projectId="freno" />
æ³¨å†Œé¡µä½¿ç”¨ projectId = 'freno' æ’å…¥æƒé™è®°å½•ï¼›

NavBarã€æƒé™æŒ‰é’®ç›´æ¥ä½¿ç”¨ useAuthStore() ä¸ hasTier()ï¼›

å¯é€‰ï¼šåŠ å…¥ membership é¡µé¢å±•ç¤ºé¡¹ç›®æƒé™ç­‰çº§ã€‚

ğŸ‘€ æƒé™ç­‰çº§å®šä¹‰ï¼ˆä»ä½åˆ°é«˜ï¼‰
ts
Copy
Edit
['guest', 'registered', 'pro', 'vip', 'admin']
âœ… å½“å‰å·²æ¥å…¥çš„é¡¹ç›®
é¡¹ç›® ID	å±•ç¤ºåç§°	æ³¨å†Œæƒé™
new-ielts-speaking	IELTS Speaking	âœ… æ³¨å†Œå³è·å¾— registered æƒé™
feelink	Feelink	âœ… æ³¨å†Œåæ‰‹åŠ¨æ’å…¥æƒé™ï¼ˆä¹Ÿå¯æ¥å…¥è‡ªåŠ¨æ³¨å†Œï¼‰

ğŸ“ ä¾èµ–è¯´æ˜
Supabase Auth & Database

Zustandï¼ˆå…¨å±€çŠ¶æ€ç®¡ç†ï¼‰

Next.js App Routerï¼ˆæ”¯æŒ layout.tsxï¼‰

sonner Toastï¼ˆæƒé™æç¤ºï¼‰

Tailwind CSS é£æ ¼ç»Ÿä¸€

ğŸ“¬ è”ç³»ä¸å¤‡æ³¨
å¦‚éœ€æ·»åŠ é¡¹ç›® / åŠŸèƒ½æ¨¡å—ï¼Œè¯·ï¼š

ç»Ÿä¸€ä½¿ç”¨å°å†™è‹±æ–‡ IDï¼ˆå¦‚ frenoã€canvas-aiï¼‰ï¼›

ç¡®ä¿åœ¨ products è¡¨ä¸­æ³¨å†Œï¼›

é¿å…å†™æ­» product_idï¼Œç»Ÿä¸€é€šè¿‡å˜é‡æ§åˆ¶ã€‚